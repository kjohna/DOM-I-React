<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Great Idea - React</title>
  <style>
    .element-1 {
      color: green;
    }
    .element-2 {
      color: blue;
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Bangers|Titillium+Web" rel="stylesheet">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
  <div id="root" class="container"></div>
</body>

<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
<script type="text/babel">
  const siteContent = {
    "nav": {
      "nav-item-1": "Services",
      "nav-item-2": "Product",
      "nav-item-3": "Vision",
      "nav-item-4": "Features",
      "nav-item-5": "About",
      "nav-item-6": "Contact",
      "img-src": "img/logo.png"
    },
    "cta": {
      "h1": "DOM\r\nIs\r\nAwesome",
      "button": "Get Started",
      "img-src": "img/header-img.png"
    },
    "main-content": {
      "features-h4":"Features",
      "features-content": "Features content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "about-h4":"About",
      "about-content": "About content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "middle-img-src": "img/mid-page-accent.jpg",
      "services-h4":"Services",
      "services-content": "Services content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "product-h4":"Product",
      "product-content": "Product content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "vision-h4":"Vision",
      "vision-content": "Vision content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "new-h4":"New Content",
      "new-content": "New content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "rabbit-h4":"Rabbit Content",
      "rabbit-content": "Rabbit content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
      "alligator-h4":"Alligator Content",
      "alligator-content": "Alligator content elementum magna eros, ac posuere elvit tempus et. Suspendisse vel tempus odio, in interdutm nisi. Suspendisse eu ornare nisl. Nullam convallis augue justo, at imperdiet metus scelerisque quis.",
    },
    "contact": {
      "contact-h4" : "Contact",
      "address" : "123 Way 456 Street\r\nSomewhere, USA",
      "phone" : "1 (888) 888-8888",
      "email" : "sales@greatidea.io",
    },
    "footer": {
      "copyright" : "Copyright Great Idea! 2018"
    },
  };
  const HelloComponent = props => <h1>Hello from React Component Land!</h1>;

  const NavLink = props => {
    return (
      <a href="#">{props.name}</a>
    );
  }

  const Nav = props => {
    const navItems = props.navItems;
    const navLinks = navItems.map((navLink) => 
      <NavLink key={`navLink-${navLink}`} name={navLink} />
    );
    return (
      <nav>{navLinks}</nav>
    );
  }

  const Logo = props => {
    return (
      <img src={props.logoSrc} className="logo"/>
    );
  }

  const Header = props => {
    const nav = <Nav navItems={props.navItems} />;
    const logo = <Logo logoSrc={props.logoSrc} />;
    return (
      <header>{nav}{logo}</header>
    );
  }

  const Cta = props => {
    const ctaContent = props.ctaContent;
    console.log()
    return (
      <section className="cta">
        <div className="cta-text">
          <h1>{ctaContent["h1"]}</h1>
          <button>{ctaContent["button"]}</button>
        </div>
        <img id="cta-img" src={ctaContent["img-src"]} />
      </section>
    );
  }

  const MainContent = props => {
    const mainContent = props.mainContent;
    const mainContentKeys = Object.keys(mainContent);
    const topContentCount = 2;
    const bottomContentCount = 3;
    let mainContentFormatted = [];
    let formattedContent = [];
    
    // build formattedContent array
    for (let i=0; i<mainContentKeys.length; i++) {
      if (mainContentKeys[i] === "middle-img-src") {
        // middle img
        formattedContent.push([mainContent[mainContentKeys[i]]]);
      } else {
        formattedContent.push([mainContent[mainContentKeys[i]], mainContent[mainContentKeys[++i]]]);
      }
    }
    console.log(formattedContent);
    
    let articleCount = 0;
    mainContentFormatted = formattedContent.map(article => {
      if(article.length === 1) {
        // case for a banner since array only contains img src
        return <BannerImg key={article[0]} imgSrc={article[0]} className="middle-img"/>   
      } else {
        if (articleCount < topContentCount) {
          articleCount ++;
          return <TopContent key={article[0]} content={article} />
        } else if (articleCount < (topContentCount + bottomContentCount)) {
          articleCount++;
          return <BottomContent key={article[0]} content={article} />
        }
      }
    });

    return (
      <section className="main-content">
        {mainContentFormatted}
      </section>
    );

  }

  const MainArticle = props => {
    const articleContent = props.articleContent;
    // console.log(articleContent);
    return (
      <div className="text-content">
        <h4>{articleContent[0]}</h4>
        <p>{articleContent[1]}</p>
      </div>
    );
  }

  const TopContent = props => {
    const content = props.content;

    return (
      <div className="top-content">
        <MainArticle articleContent={content} />
      </div>
    );
  }

  const BottomContent = props => {
    const content = props.content;

    return (
      <div className="bottom-content">
        <MainArticle articleContent={content} />
      </div>
    );
  }

  const BannerImg = props => {
    const imgSrc = props.imgSrc;
    const className=props.className;
    
    return (
      <img className={className} src={imgSrc} />
    );
  }

  const App = props => {
    // get navItems from siteContent
    let navItems = [];
    for (const navItem in siteContent.nav) {
      if (/^nav-item/.test(navItem)) {
        navItems.push(siteContent.nav[navItem]);
      }
    }
    // get logoSrc for header from siteContent
    const logoSrc=siteContent.nav["img-src"];
    // get CTA content from siteContent
    const ctaContent=siteContent.cta;
    // get main-content from siteContent
    const mainContent=siteContent["main-content"];

    return (
      <div>
        <Header navItems={navItems} logoSrc={logoSrc}/>
        <Cta ctaContent={ctaContent} />
        <MainContent mainContent={mainContent} />
      </div>
    );
  };
  ReactDOM.render(<App />, document.getElementById('root'));
  
</script>
</html>